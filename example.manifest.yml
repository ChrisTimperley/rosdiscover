# SEE: http://wiki.ros.org/pluginlib

nodes:
  - name: costmap_node
    source: costmap_2d/src/costmap_2d_node.cpp
  # https://github.com/ros-planning/navigation/blob/melodic-devel/costmap_2d/src/costmap_2d_cloud.cpp

  - name: costmap_2d_cloud
    source: costmap_2d/src/costmap_2d_cloud.cpp
    publishes:
      - name: voxel_marked_cloud
        format: sensor_msgs::PointCloud
      - name: voxel_unknown_cloud
        format: sensor_msgs::PointCloud
    subscribes:
      - name: voxel_grid
        format: costmap_2d::VoxelGrid

  - name: costmap_2d_markers
    package: costmap_2d
    source: costmap_2d/src/costmap_2d_markers.cpp
    publishes:
      - name: visualization_marker
        format: visualization_msgs::Marker
    subscribes:
      - name: voxel_grid
        format: costmap_2d::VoxelGrid

  # https://github.com/ros-planning/navigation/blob/melodic-devel/navfn/src/navfn_node.cpp
  - name: global_planner
    package: navfn
    type: ????
    source: navfn/src/navfn_node.cpp

  # https://github.com/ros-planning/navigation/blob/melodic-devel/fake_localization/static_odom_broadcaster.py
  - name: fake_odom
    package: fake_localization
    parameters:
      gets:
        - name: "~base_frame_id"
          default: base_link
        - name: "~odom_frame_id"
          default: odom
        - name: "~publish_frequency"
          default: 10.0
    publishes:
      - name: odom
        format: Odometry

  - name: fake_localization
    package: fake_localization
    source: fake_localization/fake_localization.cpp
    publishes:
      - name: amcl_pose
        format: geometry_msgs::PoseWithCovarianceStamped
      - name: particlecloud
        format: geometry_msgs::PoseArray

    subscribes:
      - name: base_pose_ground_truth

    parameters:
      gets:
        - name: odom_frame_id
          default: odom
        - name: base_frame_id
          default: base_link
        - name: global_frame_id
          default: /map
        - name: delta_x
          default: 0.0
        - name: delta_y
          default: 0.0
        - name: delta_yaw
          default: 0.0
        - name: transform_tolerance
          default: 0.1

  # https://github.com/ros-planning/navigation/blob/melodic-devel/carrot_planner/src/carrot_planner.cpp


  - name: tf_buffer
    parameters:
      - name: buffer_size
        default: 120.0


  - name: view_frames
    calls-services:
      - name: ~tf2_frames
        srv: FrameGraph


# INTERESTING: tf2_ros/src/transform_listener.cpp
