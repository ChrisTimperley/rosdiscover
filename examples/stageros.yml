packages:
  - name: tf2_ros
    nodes:
      - name: '"tf_buffer"'
        location: 'src/buffer_server_main.cpp:57'
      - name: static_transform_publisher
        anonymous: True
    parameters:
      # FIXME dynamic
      reads:
        - name: param_name
          location: 'src/static_transform_broadcaster_program.cpp:92'
    services:
      - name: '~tf2_frames'
        location: 'src/buffer.cpp:49'
    publishers:
      - name: '"/tf_static"'
        location: 'src/static_transform_broadcaster.cpp:42'
      - name: '"/tf"'
        location: 'src/transform_broadcaster.cpp:42'
    subscribers:
      - name: '"/tf"'
        format: tf2_msgs/TFMessage
        location: 'src/transform_listener.cpp:72'
      - name: '"/tf_static"'
        format: tf2_msgs/TFMessage
        location: 'src/transform_listener.cpp:73'
      - name: '"/tf"'
        format: tf2_msgs/TFMessage
        location: 'src/transform_listener.cpp:79'
      - name: '"/tf_static"'
        format: tf2_msgs/TFMessage
        location: 'src/transform_listener.cpp:82'

  - name: camera_info_manager
    services:
      - name: set_camera_info
        format: '????'
        location: 'src/camera_info_manager.cpp:87'

  - name: depthimage_to_laserscan
    nodes:
      - name: depth_to_laserscan
        location: 'src/depthimage_to_laserscan.cpp:37'
    subscribers:
      - name: scan
        format: sensor_msgs/LaserScan
        location: 'src/DepthImageToLaserScanROS.cpp:47'

  # FIXME nodelets: src/nodes/image_proc.cpp:69
  - name: image_proc
    nodes:
      - name: image_proc
        location: 'src/nodes/image_proc.cpp:41'
    parameters:
      reads:
        - name: '~queue_size'
          location: 'src/nodes/image_proc.cpp:62'

  - name: stage_ros
    nodes:
      - name: stageros
        location: 'src/stageros.cpp:743'
    services:
      - name: reset_positions
        format: StageNode/cb_reset_srv
        location: 'src/stageros.cpp:388'
    parameters:
      writes:
        - name: /use_sim_time
          location: 'src/stageros.cpp:325'
      reads:
        - name: base_watchdog_timeout
          default: 0.2
          location: 'src/stageros.cpp:276'
        - name: is_depth_canonical
          default: true
          location: 'src/stageros.cpp:280'
    publishers:
      - name: /clock
        format: rosgraph_msgs/Clock
        location: 'src/stageros.cpp:385'

      # DYNAMIC!
      - name: 'mapName(ODOM, r, static_cast<Stg::Model*>(new_robot->positionmodel))'
        format: nav_msgs/Odometry
        location: 'src/stageros.cpp:354'
      - name: 'mapName(BASE_POSE_GROUND_TRUTH, r, static_cast<Stg::Model*>(new_robot->positionmodel))'
        format: nav_msgs/Odometry
        location: 'src/stageros.cpp:355'
      - name: 'mapName(CMD_VEL, r, static_cast<Stg::Model*>(new_robot->positionmodel))'
        format: geometry_msgs/Twist
        location: 'src/stageros.cpp:356'

      - name: 'mapName(BASE_SCAN, r, static_cast<Stg::Model*>(new_robot->positionmodel))'
        format: sensor_msgs/LaserScan
        location: 'src/stageros.cpp:361'
      - name: 'n_.advertise<sensor_msgs::LaserScan>(mapName(BASE_SCAN, r, s, static_cast<Stg::Model*>(new_robot->positionmodel))'
        format: sensor_msgs/LaserScan
        location: 'src/stageros.cpp:363'

      - name: 'mapName(IMAGE, r, static_cast<Stg::Model*>(new_robot->positionmodel))'
        format: sensor_msgs/Image
        location: 'src/stageros.cpp:371'
      - name: 'mapName(DEPTH, r, static_cast<Stg::Model*>(new_robot->positionmodel))'
        format: sensor_msgs/Image
        location: 'src/stageros.cpp:372'
      - name: 'mapName(CAMERA_INFO, r, static_cast<Stg::Model*>(new_robot->positionmodel))'
        format: sensor_msgs/CameraInfo
        location: 'src/stageros.cpp:373'

      - name: 'mapName(IMAGE, r, s, static_cast<Stg::Model*>(new_robot->positionmodel))'
        format: sensor_msgs/Image
        location: 'src/stageros.cpp:377'
      - name: 'mapName(DEPTH, r, s, static_cast<Stg::Model*>(new_robot->positionmodel))'
        format: sensor_msgs/Image
        location: 'src/stageros.cpp:378'
      - name: 'mapName(CAMERA_INFO, r, s, static_cast<Stg::Model*>(new_robot->positionmodel))'
        format: sensor_msgs/CameraInfo
        location: 'src/stageros.cpp:379'
